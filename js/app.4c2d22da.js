(function(t){function e(e){for(var n,s,c=e[0],r=e[1],l=e[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,c=1;c<i.length;c++){var r=i[c];0!==a[r]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},a={app:0},o=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/pure-suggest/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0b2c":function(t,e,i){"use strict";i("d21c")},1241:function(t,e,i){},2506:function(t,e,i){},"2a0b":function(t,e,i){"use strict";i("3325")},"30c7":function(t,e,i){"use strict";i("e864")},"32fe":function(t,e,i){},3325:function(t,e,i){},"357e":function(t,e,i){"use strict";i("6b70")},"3ed4":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("HeaderPanel",{attrs:{id:"header",isMobile:t.isMobile,selectedPublicationsCount:t.selectedPublications.length,excludedPublicationsCount:t.excludedPublicationsDois.size},on:{exportSession:t.exportSession,exportBibtex:t.exportAllBibtex,clearSession:t.clearSession,clearCache:t.clearCache,openAbout:function(e){t.isAboutPageShown=!0},openKeyboardControls:function(e){t.isKeyboardControlsShown=!0}}}),e("div",{class:{"network-expanded":t.isNetworkExpanded},attrs:{id:"main"},on:{click:function(e){return t.clearActivePublication("clicked anywhere")}}},[e("SelectedPublicationsComponent",{ref:"selected",attrs:{id:"selected",publications:t.selectedPublications},on:{add:t.addPublicationsToSelection,startSearching:t.startSearchingSelected,searchEndedWithoutResult:t.endLoading,openSearch:t.openSearch,remove:t.removePublication,activate:t.activatePublicationComponentByDoi,showAbstract:t.showAbstract,exportSingleBibtex:t.exportSingleBibtex,updateBoost:t.updateBoost,loadExample:t.loadExample,importSession:t.importSession}}),e("SuggestedPublicationsComponent",{ref:"suggested",attrs:{id:"suggested",suggestion:t.suggestion},on:{add:t.addPublicationsToSelection,remove:t.removePublication,activate:t.activatePublicationComponentByDoi,showAbstract:t.showAbstract,exportSingleBibtex:t.exportSingleBibtex,loadMore:t.loadMoreSuggestions}}),e("NetworkVisComponent",{ref:"network",attrs:{id:"network",selectedPublications:t.selectedPublications,suggestedPublications:t.suggestion?t.suggestion.publications:[],isExpanded:t.isNetworkExpanded,svgWidth:1500,svgHeight:600},on:{activate:t.activatePublicationComponentByDoi,expand:function(e){t.isNetworkExpanded=!0},collapse:function(e){t.isNetworkExpanded=!1}}})],1),e("QuickAccessBar",{staticClass:"is-hidden-desktop",attrs:{id:"quick-access"}}),e("b-modal",{model:{value:t.isSearchPanelShown,callback:function(e){t.isSearchPanelShown=e},expression:"isSearchPanelShown"}},[e("SearchPanel",{attrs:{initialSearchQuery:t.searchQuery,selectedPublicationsDois:t.selectedPublicationsDois},on:{add:t.addPublicationsToSelection,searchEmpty:t.notifySearchEmpty}})],1),e("b-modal",{model:{value:t.isAboutPageShown,callback:function(e){t.isAboutPageShown=e},expression:"isAboutPageShown"}},[e("AboutPage")],1),e("b-modal",{model:{value:t.isKeyboardControlsShown,callback:function(e){t.isKeyboardControlsShown=e},expression:"isKeyboardControlsShown"}},[e("KeyboardControlsPage")],1)],1)},o=[],s=i("c7eb"),c=i("1da1"),r=(i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("d81d"),i("159b"),i("99af"),i("b64b"),i("07ac"),i("ac1f"),i("1276"),i("a630"),i("a15b"),i("e9c4"),i("38cf"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"box p-0 m-0 is-radiusless"},[e("b-navbar",{staticClass:"box p-0 m-0 is-radiusless",attrs:{"fixed-top":t.isMobile},scopedSlots:t._u([{key:"brand",fn:function(){return[e("b-navbar-item",[e("b-icon",{staticClass:"has-text-grey",attrs:{icon:"water-plus-outline",size:"is-medium"}}),e("h1",{staticClass:"title ml-2"},[e("span",{domProps:{innerHTML:t._s(t.$appNameHtml)}})])],1)]},proxy:!0},{key:"start",fn:function(){return[e("b-navbar-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.selectedPublicationsCount,expression:"selectedPublicationsCount"}],attrs:{label:"Session (".concat(t.selectedPublicationsCount," selected").concat(t.excludedPublicationsCount?"; ".concat(t.excludedPublicationsCount," excluded"):"",")")}},[e("b-navbar-item",{on:{click:function(e){return t.$emit("exportSession")}}},[e("b-icon",{attrs:{icon:"export"}}),e("span",{staticClass:"ml-2"},[t._v("Export session as JSON")])],1),e("b-navbar-item",{on:{click:function(e){return t.$emit("exportBibtex")}}},[e("b-icon",{attrs:{icon:"export"}}),e("span",{staticClass:"ml-2"},[t._v("Export selected as BibTeX")])],1),e("b-navbar-item",{staticClass:"has-text-danger",on:{click:function(e){return t.$emit("clearSession")}}},[e("b-icon",{attrs:{icon:"delete"}}),e("span",{staticClass:"ml-2"},[e("span",{staticClass:"key"},[t._v("C")]),t._v("lear session")])],1)],1)]},proxy:!0},{key:"end",fn:function(){return[e("b-navbar-dropdown",{attrs:{label:"⋮","icon-left":"dots-vertical",right:"",collapsible:""}},[e("b-navbar-item",{staticClass:"is-hidden-touch",on:{click:function(e){return t.$emit("openKeyboardControls")}}},[t._v("Keyboard controls")]),e("b-navbar-item",{on:{click:function(e){return t.$emit("openAbout")}}},[t._v("About")]),e("b-navbar-item",{staticClass:"has-text-danger",on:{click:function(e){return t.$emit("clearCache")}}},[e("b-icon",{attrs:{icon:"cached"}}),e("span",{staticClass:"ml-2"},[t._v("Clear cache (and session)")])],1)],1)]},proxy:!0}])}),e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.selectedPublicationsCount,expression:"selectedPublicationsCount === 0"}],staticClass:"columns"},[e("div",{staticClass:"column"},[e("div",{staticClass:"subtitle level-item mt-2"},[t._v(" "+t._s(this.$appSubtitle)+" ")])]),e("div",{staticClass:"column is-three-quarters"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.selectedPublicationsCount,expression:"selectedPublicationsCount === 0"}],staticClass:"notification has-text-centered p-2"},[t._m(0)])])])],1)}),l=[function(){var t=this,e=t._self._c;return e("p",[t._v(" Based on a set of selected publications, "),e("b",{staticClass:"has-text-info"},[t._v("suggest")]),t._v("ing related "),e("b",{staticClass:"has-text-primary"},[t._v("pu")]),t._v("blications connected by "),e("b",{staticClass:"has-text-primary"},[t._v("re")]),t._v("ferences. ")])}],u=(i("a9e3"),{name:"HeaderPanel",props:{isMobile:Boolean,selectedPublicationsCount:Number,excludedPublicationsCount:Number}}),d=u,p=(i("dc6b"),i("2877")),h=Object(p["a"])(d,r,l,!1,null,"df3df0ae",null),b=h.exports,f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"selected-publications box has-background-primary"},[e("div",{staticClass:"level"},[e("div",{staticClass:"level-left has-text-white"},[e("div",{staticClass:"level-item"},[e("b-icon",{attrs:{icon:"water-outline"}}),e("h2",{staticClass:"is-size-5 ml-2"},[t._v("Selected")]),e("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.publications.length,expression:"publications.length"},{name:"tippy",rawName:"v-tippy"}],staticClass:"ml-2",attrs:{icon:"information-outline",size:"is-small","data-tippy-content":"The <b>publications selected as seeds</b> for computing the suggestions, sorted by score."}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.publications.length,expression:"publications.length"}],staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("div",{staticClass:"field has-addons"},[e("p",{staticClass:"control has-icons-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.boostKeywordString,expression:"boostKeywordString"},{name:"tippy",rawName:"v-tippy"}],staticClass:"input boost has-background-warning-light",attrs:{type:"text",placeholder:"keyword(s)","data-tippy-content":"Boost by factors of 2 the score of publications that contain the following keyword(s) in their title.<br><br>Use commas to separate multiple keywords."},domProps:{value:t.boostKeywordString},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateBoost.apply(null,arguments)},input:function(e){e.target.composing||(t.boostKeywordString=e.target.value)}}}),e("span",{staticClass:"icon is-small is-right is-clickable"},[e("i",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.clearBoost.apply(null,arguments)}}})])]),e("p",{staticClass:"control"},[e("b-button",{staticClass:"button has-background-warning",attrs:{type:"submit","icon-left":"chevron-double-up"},on:{click:t.updateBoost}},[e("span",[e("span",{staticClass:"key"},[t._v("B")]),t._v("oost")])])],1)])])])]),e("form",{staticClass:"field has-addons",on:{submit:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[e("p",{staticClass:"control is-expanded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.addQuery,expression:"addQuery"},{name:"tippy",rawName:"v-tippy"}],staticClass:"input add-publication",attrs:{type:"text",placeholder:"DOI(s)/title or search","data-tippy-content":"One or more <b>DOIs</b> (separated by different characters or included in a different format such as BibTeX).<br/>Alternatively, <b>paper title</b> or a unique part of it (only works for one publication)"},domProps:{value:t.addQuery},on:{input:function(e){e.target.composing||(t.addQuery=e.target.value)}}})]),e("p",{staticClass:"control"},[e("b-button",{staticClass:"button level-right has-background-primary-light is-hidden-touch",attrs:{type:"submit","icon-left":"plus-thick"},on:{click:function(e){return e.stopPropagation(),t.add.apply(null,arguments)}}},[e("span",{staticClass:"key"},[t._v("A")]),t._v("dd ")]),e("b-button",{staticClass:"button level-right has-background-primary-light is-hidden-desktop",attrs:{type:"submit","icon-left":"plus-thick"},on:{click:function(e){return e.stopPropagation(),t.add.apply(null,arguments)}}})],1),e("p",{staticClass:"control"},[e("b-button",{staticClass:"button level-right has-background-primary-light ml-1 is-hidden-touch",attrs:{type:"submit","icon-left":"magnify"},on:{click:function(e){return e.stopPropagation(),t.openSearch(!1)}}},[e("span",{staticClass:"key"},[t._v("S")]),t._v("earch")]),e("b-button",{staticClass:"button level-right has-background-primary-light ml-1 is-hidden-desktop",attrs:{type:"submit","icon-left":"magnify"},on:{click:function(e){return e.stopPropagation(),t.openSearch(!1)}}})],1)]),e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.publications.length,expression:"publications.length === 0"}],staticClass:"notification has-text-centered has-background-primary-light p-2"},[e("p",[t._v(" To start, "),e("b",[e("b-icon",{attrs:{icon:"plus-thick",size:"is-small"}}),t._v(" add")],1),t._v(" publications through a "),e("b",[t._v("title")]),t._v(" or "),e("b",[t._v("DOI(s)")]),t._v(" ("),e("a",{attrs:{href:"https://www.doi.org/"}},[t._v("Document Object Intentfier")]),t._v("), "),e("br"),e("b",[e("b-icon",{attrs:{icon:"magnify",size:"is-small"}}),t._v(" search")],1),t._v(" using "),e("b",[t._v("keywords")]),t._v(", or: ")]),e("div",{staticClass:"level mt-2"},[e("div",{staticClass:"level-item"},[e("b-button",{staticClass:"button has-background-primary-light",attrs:{"icon-left":"file-document"},on:{click:function(e){return e.stopPropagation(),t.$emit("loadExample")}}},[t._v(" Load example ")])],1),e("div",{staticClass:"level-item"},[e("b-button",{staticClass:"button has-background-primary-light",attrs:{"icon-left":"import"},on:{click:t.importSession}},[t._v(" Import session from JSON ")])],1)])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.noPublicationWarning,expression:"noPublicationWarning"}],staticClass:"notification has-background-danger-light has-text-danger-dark mb-2 p-2"},[e("button",{staticClass:"delete",on:{click:function(e){e.stopPropagation(),t.noPublicationWarning=!1}}}),t._v(" Cannot find a publication with this or similar title. ")])]),e("PublicationListComponent",{attrs:{publications:t.publications},on:{activate:t.activatePublication,remove:t.removePublication,showAbstract:t.showAbstract,exportSingleBibtex:t.exportSingleBibtex}})],1)},v=[],g=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"publication-list has-background-white"},t._l(t.publications,(function(i){return e("PublicationComponent",{key:i.doi,attrs:{publication:i,suggestion:t.suggestion},on:{add:t.addPublication,remove:t.removePublication,activate:t.activatePublication,showAbstract:t.showAbstract,exportBibtex:t.exportSingleBibtex}})})),1)},m=[];i("2b3d"),i("9861");function y(t,e){var i=new Blob([e],{type:"text/csv"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(i,t);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(i),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function w(t,e){var i=t.getBoundingClientRect().top,n=i+window.pageYOffset-e;window.scrollTo({top:n,behavior:"smooth"})}function C(t,e){function i(t){var e=1e4*Math.sin(t++);return e-Math.floor(e)}var n,a,o=t.length;while(o)a=Math.floor(i(e)*o--),n=t[o],t[o]=t[a],t[a]=n,++e;return t}i("8a79"),i("b680");var x=function(){var t=this,e=t._self._c;return e("li",{staticClass:"publication-component media",class:{active:t.publication.isActive,selected:t.publication.isSelected,linkedToActive:t.publication.isLinkedToActive,unread:!t.publication.isRead&&!t.publication.isSelected},attrs:{id:t.publication.doi,tabindex:"0"},on:{focus:function(e){return t.$emit("activate",t.publication.doi)},click:function(e){return e.stopPropagation(),t.$emit("activate",t.publication.doi)}}},[e("tippy",{staticClass:"glyph",scopedSlots:t._u([{key:"trigger",fn:function(){return[e("div",{staticClass:"media-left has-text-centered",style:{"background-color":t.publication.scoreColor}},[e("div",{staticClass:"tooltip-target"},[e("div",{staticClass:"is-size-3 is-inline-block"},[t._v(t._s(t.publication.score))]),t.publication.boostFactor>1?e("div",{staticClass:"boost-indicator has-background-warning is-size-5 is-inline-block ml-1",style:t.boostIndicatorSize},[e("b-icon",{style:t.chevronOffset,attrs:{icon:t.chevronType,size:"is-small"}})],1):t._e()]),e("div",{staticClass:"reference-counts is-size-6"},[e("div",{staticClass:"is-pulled-left"},[t.publication.citationCount>0||0===t.publication.referenceDois.length?e("span",{class:t.publication.referenceDois.length?"":"unknown"},[e("b-icon",{attrs:{icon:"arrow-bottom-left-thick",size:"is-small"}}),t._v(" "+t._s(t.publication.citationCount?t.publication.citationCount:"-")+" ")],1):t._e()]),e("div",{staticClass:"is-pulled-right"},[t.publication.referenceCount>0?e("span",[t._v(" "+t._s(t.publication.referenceCount)+" "),e("b-icon",{attrs:{icon:"arrow-top-left-thick",size:"is-small"}})],1):t._e()])])])]},proxy:!0}])},[e("div",[t._v(" Suggestion score of "),e("b",[t._v(t._s(t.publication.score)+" = "),1!=t.publication.boostFactor?e("span",[t._v("(")]):t._e(),t._v(t._s(t.publication.citationCount)+" + "+t._s(t.publication.referenceCount)),1!=t.publication.boostFactor?e("span",[t._v(") · "+t._s(t.publication.boostFactor))]):t._e()]),t._v(","),e("br"),t._v(" citing "),e("b",[t._v(t._s(t.publication.citationCount))]),t._v(" ("),e("b-icon",{class:t.publication.referenceDois.length?"":"unknown",attrs:{icon:"arrow-bottom-left-thick",size:"is-small"}}),t.publication.referenceDois.length?t._e():e("span",{staticClass:"unknown"},[t._v(", citing data not available")]),t._v(") and cited by "),e("b",[t._v(t._s(t.publication.referenceCount))]),t._v(" ("),e("b-icon",{attrs:{icon:"arrow-top-left-thick",size:"is-small"}}),t._v(") selected publications"),1!=t.publication.boostFactor?e("span",[t._v(", multiplied by a boost factor of "),e("b",[t._v(t._s(t.publication.boostFactor)+" = 2"),e("sup",[t._v(t._s(t.publication.boostMatches))])]),t._v(" ("),e("b-icon",{attrs:{icon:t.chevronType,size:"is-small"}}),t._v("; "+t._s(t.publication.boostMatches)+" keyword"),t.publication.boostMatches>1?e("span",[t._v("s")]):t._e(),t._v(" matched)")],1):t._e(),t._v(". ")],1),t.publication.isLinkedToActive?e("div",[e("br"),t._v(" Marked as refered by or referencing currently active publication. ")]):t._e(),t.publication.isActive?e("div",[e("br"),t._v(" Currently active, with linked publications highlighted. ")]):t._e()]),e("div",{staticClass:"media-content"},[e("div",{staticClass:"summary"},[t.publication.title?e("span",[e("b",[e("span",{domProps:{innerHTML:t._s(t.publication.titleHighlighted?t.publication.titleHighlighted:t.publication.title)}})]),t._v(" ")]):t._e(),t.publication.title?t._e():e("span",{staticClass:"unknown"},[e("b",[t._v("[unknown title] ")])]),e("span",[t._v("("),e("span",[t._v(t._s(t.publication.authorShort?t.publication.authorShort+", ":""))]),e("span",{class:t.publication.year?"":"unknown"},[t._v(t._s(t.publication.year?t.publication.year:"[unknown year]"))]),t._v(") ")]),e("b-taglist",[t.publication.isHighlyCited?e("b-tag",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"is-dark",attrs:{icon:"star",size:"is-small","data-tippy-content":"Identified as highly cited: ".concat(t.publication.isHighlyCited,".")}},[t._v("Highly cited")]):t._e(),t.publication.isSurvey?e("b-tag",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"is-dark",attrs:{icon:"table",size:"is-small","data-tippy-content":"Identified as literature survey: ".concat(t.publication.isSurvey,".")}},[t._v("Literature survey")]):t._e(),t.publication.isNew?e("b-tag",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"is-dark",attrs:{icon:"alarm",size:"is-small","data-tippy-content":"Identified as new: ".concat(t.publication.isNew,".")}},[t._v("New")]):t._e()],1)],1),t.publication.isActive?e("div",[e("span",[t.publication.author?e("span",{domProps:{innerHTML:t._s(t.publication.authorOrcid+(t.publication.authorOrcid.endsWith(".")?"":"."))},on:{click:function(e){return e.stopPropagation(),t.refocus.apply(null,arguments)}}}):t._e()]),t.publication.container?e("span",[e("em",[t._v(" "+t._s(t.publication.container)+". ")])]):t._e(),t._m(0),e("a",{attrs:{href:t.publication.doiUrl},on:{click:function(e){return e.stopPropagation(),t.refocus.apply(null,arguments)}}},[t._v(t._s(t.publication.doi))])]):t._e(),!t.publication.year&&!t.publication.title&!t.publication.author&&!t.publication.container&&t.publication.isActive?e("div",{staticClass:"notification has-background-danger-light has-text-danger-dark"},[t._v(" No metadata could be retrieved for the publication from "),e("a",{attrs:{href:"https://opencitations.net/index/coci/api/v1/metadata/".concat(t.publication.doi)},on:{click:function(e){return e.stopPropagation(),t.refocus.apply(null,arguments)}}},[t._v("Open Citations")]),t._v(". "),0===t.publication.score?e("span",[t._v("Also, it is not cited by another selected publication—"),e("b",[t._v("please check if the DOI is correct.")])]):t._e()]):t._e(),!t.publication.year&&t.publication.isActive?e("div",{staticClass:"notification has-background-danger-light has-text-danger-dark"},[t._v(" The publication cannot be shown in the citation network visualization because of the unknown publication year. ")]):t._e(),t.publication.isActive?e("div",{staticClass:"stats-and-links level"},[e("div",{staticClass:"level-left"},[e("div",{class:"level-item ".concat(t.publication.referenceDois.length?"":"unknown")},[e("label",[e("b-icon",{attrs:{icon:"arrow-bottom-left-thick",size:"is-small"}}),t._v("Citing:")],1),e("b",[t._v(t._s(t.publication.referenceDois.length?t.publication.referenceDois.length.toLocaleString("en"):"not available"))])]),e("div",{staticClass:"level-item"},[e("label",[e("b-icon",{attrs:{icon:"arrow-top-left-thick",size:"is-small"}}),t._v("Cited by:")],1),e("b",[t._v(t._s(t.publication.citationDois.length.toLocaleString("en")))]),t.publication.citationsPerYear>0?e("span",[t._v("  ("+t._s(t.publication.citationsPerYear.toFixed(1))+"/year) ")]):t._e()])]),t.publication.title&&t.publication.isActive?e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[t.publication.abstract?e("a",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{"data-tippy-content":"Abs<span class='key'>t</span>ract"},on:{click:function(e){return e.stopPropagation(),t.showAbstract.apply(null,arguments)}}},[e("b-icon",{attrs:{icon:"text"}})],1):t._e(),t.publication.oaLink?e("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ml-5",attrs:{href:t.publication.oaLink,"data-tippy-content":"<span class='key'>O</span>pen access"},on:{click:function(e){return e.stopPropagation(),t.refocus.apply(null,arguments)}}},[e("b-icon",{attrs:{icon:"lock-open-check-outline"}})],1):t._e(),e("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ml-5",attrs:{href:t.publication.gsUrl,"data-tippy-content":"<span class='key'>G</span>oogle Scholar"},on:{click:function(e){return e.stopPropagation(),t.refocus.apply(null,arguments)}}},[e("b-icon",{attrs:{icon:"school"}})],1),e("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ml-5",attrs:{"data-tippy-content":"Export as BibTe<span class='key'>X</span> citation"},on:{click:function(e){return e.stopPropagation(),t.exportBibtex.apply(null,arguments)}}},[e("b-icon",{attrs:{icon:"format-quote-close"}})],1)])]):t._e()]):t._e()]),e("div",{staticClass:"media-right"},[e("div",[t.suggestion?e("b-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"is-primary is-small",attrs:{"icon-left":"plus-thick","data-tippy-content":"Add publication to list of selected publications."},on:{click:function(e){return e.stopPropagation(),t.$emit("add",t.publication.doi)}}}):t._e()],1),e("div",[e("b-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"is-small",attrs:{"icon-left":"minus-thick","data-tippy-content":"Remove publication from the list and exclude for suggestions."},on:{click:function(e){return e.stopPropagation(),t.$emit("remove",t.publication.doi)}}})],1)])],1)},_=[function(){var t=this,e=t._self._c;return e("label",[e("span",{staticClass:"key"},[t._v("D")]),t._v("OI:")])}],k={name:"PublicationComponent",props:{publication:Object,suggestion:Boolean},computed:{chevronType:function(){return this.publication.boostFactor>=8?"chevron-triple-up":this.publication.boostFactor>=4?"chevron-double-up":this.publication.boostFactor>1?"chevron-up":""},boostIndicatorSize:function(){return this.publication.boostFactor>=8?{width:"2rem",height:"2rem"}:this.publication.boostFactor>=4?{width:"1.6rem",height:"1.6rem"}:this.publication.boostFactor>1?{width:"1.3rem",height:"1.3rem "}:""},chevronOffset:function(){return this.publication.boostFactor>=8?{position:"relative",top:"0rem"}:this.publication.boostFactor>=4?{position:"relative",top:"-0.15rem"}:this.publication.boostFactor>1?{position:"relative",top:"-0.3rem"}:""}},methods:{showAbstract:function(){this.$emit("showAbstract",this.publication)},exportBibtex:function(){this.$emit("exportBibtex",this.publication),this.refocus()},refocus:function(){document.getElementById(this.publication.doi).focus()}}},P=k,S=(i("bed9"),Object(p["a"])(P,x,_,!1,null,"4e43e41c",null)),O=S.exports,A={name:"SelectedPublicationsComponent",components:{PublicationComponent:O},props:{publications:Array,suggestion:Boolean},watch:{publications:{deep:!0,handler:function(){this.$nextTick(this.scrollToActivated)}}},data:function(){return{onNextActivatedScroll:!0}},methods:{addPublication:function(t){this.$emit("add",t)},removePublication:function(t){this.$emit("remove",t)},activatePublication:function(t){this.onNextActivatedScroll=!1,this.$emit("activate",t)},showAbstract:function(t){this.$emit("showAbstract",t)},exportSingleBibtex:function(t){this.$emit("exportSingleBibtex",t)},scrollToActivated:function(){if(this.onNextActivatedScroll){var t=this.$el.getElementsByClassName("active")[0];t&&(window.innerWidth<=1023?w(t,65):t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}))}else this.onNextActivatedScroll=!0}}},j=A,D=Object(p["a"])(j,g,m,!1,null,null,null),E=D.exports,N=i("d4ec"),B=i("bee2"),L=(i("498a"),i("5319"),i("4de4"),i("2ef0")),T=i.n(L),$=(i("d9e2"),i("eb11")),M=i.n($);function I(t,e){return F.apply(this,arguments)}function F(){return F=Object(c["a"])(Object(s["a"])().mark((function t(e,i){var n,a,o,c,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=JSON.parse(M.a.decompress(localStorage[e])),n){t.next=4;break}throw new Error("Cached data is empty");case 4:i(n),t.next=26;break;case 7:return t.prev=7,t.t0=t["catch"](0),t.prev=9,t.next=12,fetch(e);case 12:if(a=t.sent,a.ok){t.next=15;break}throw new Error("Received response with status ".concat(a.status));case 15:return t.next=17,a.json();case 17:o=t.sent;try{localStorage[e]=M.a.compress(JSON.stringify(o))}catch(s){console.log("Cache full (#elements: ${Object.keys(localStorage).length})! Removing elements...");try{for(c=0;c<100;c++)r=Object.keys(localStorage)[Math.floor(Math.random()*Object.keys(localStorage).length)],localStorage.removeItem(r);localStorage[e]=M.a.compress(JSON.stringify(o))}catch(l){console.error('Unable to cache information for "'.concat(e,'" in local storage: ').concat(l))}}console.log('Successfully fetched data for "'.concat(e,'"')),i(o),t.next=26;break;case 23:t.prev=23,t.t1=t["catch"](9),console.error('Unable to fetch or process data for "'.concat(e,'": ').concat(t.t1));case 26:case"end":return t.stop()}}),t,null,[[0,7],[9,23]])}))),F.apply(this,arguments)}function R(){localStorage.clear()}var z=.1,K=function(){function t(e){Object(N["a"])(this,t),this.query=e}return Object(B["a"])(t,[{key:"execute",value:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e,i,n,a=this;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=[],i=!1,this.query.split(/ |"|\{|\}|doi:|doi.org\//).forEach((function(t){t=T.a.trim(t,"."),0===t.indexOf("10.")&&e.push(t)})),0!==e.length){t.next=8;break}return n=this.query.replace(/\W+/g,"+").toLowerCase(),console.log("Searching for publications with title or similar to '".concat(this.query,"'.")),t.next=8,I("https://api.crossref.org/works?query.bibliographic=".concat(n,"&mailto=fabian.beck@uni-bamberg.de"),(function(t){var o=.7,s="";i=!0,t.message.items.filter((function(t){return t.title})).forEach((function(t){var c=t.title[0]+(t.subtitle&&t.title[0]!==t.subtitle[0]?" "+t.subtitle[0]:""),r=a.computeTitleSimilarity(n,c),l=r-o;l>z?i=!1:l>-z&&(i=!0),console.log("  ... similarity to '".concat(c,"' is ").concat(r,".")),r>o&&(e=[t.DOI],s=c,o=r)})),s?i?console.log("  Some publication titles are sufficiently similar, but the result is ambiguous."):console.log("  Identified as best fit: '".concat(s,"' (").concat(e[0],")")):console.log("  None of the publication titles is sufficiently similar.")}));case 8:return t.abrupt("return",{dois:e,ambiguousResult:i});case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"computeTitleSimilarity",value:function(t,e){var i=["the","for","with","and"],n=0,a=0,o=" "+e.replace(/\W+/g," ").toLowerCase()+" ";return t.split("+").forEach((function(t){t.length>2&&-1===i.indexOf(t)&&(a++,o.indexOf(" "+t+" ")>=0&&n++)})),n/a}}]),t}(),H={name:"SelectedPublicationsComponent",components:{PublicationListComponent:E},props:{publications:Array},data:function(){return{addQuery:"",noPublicationWarning:!1,boostKeywordString:""}},methods:{add:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$emit("startSearching"),e=new K(this.addQuery),t.next=4,e.execute();case 4:i=t.sent,i.dois.length>0?i.ambiguousResult?(this.$emit("searchEndedWithoutResult"),this.openSearch(!0)):(this.$emit("add",i.dois),this.addQuery=""):(this.noPublicationWarning=!0,this.$emit("searchEndedWithoutResult"));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("openSearch",this.addQuery,t?"Several publications might match, please select...":null),this.addQuery=""},removePublication:function(t){this.$emit("remove",t)},activatePublication:function(t){this.$emit("activate",t)},showAbstract:function(t){this.$emit("showAbstract",t)},exportSingleBibtex:function(t){this.$emit("exportSingleBibtex",t)},updateBoost:function(){this.$emit("updateBoost",this.boostKeywordString)},clearBoost:function(){this.boostKeywordString="",this.$emit("updateBoost",this.boostKeywordString)},setBoost:function(t){this.boostKeywordString=t},importSession:function(){var t=this;this.$buefy.dialog.confirm({title:"Import session",message:'<label>Choose an exported session JSON file:&nbsp;</label>\n            <input type="file" id="import-json-input" accept="application/JSON"/>',onConfirm:function(){return t.$emit("importSession",document.getElementById("import-json-input").files[0])}})}},watch:{addQuery:function(){this.noPublicationWarning=!1}}},Q=H,U=(i("ac6b"),Object(p["a"])(Q,f,v,!1,null,"6c9dec56",null)),W=U.exports,J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"suggested-publications box has-background-info"},[e("div",{staticClass:"level box-header"},[e("div",{staticClass:"level-left has-text-white"},[e("div",{staticClass:"level-item"},[e("b-icon",{attrs:{icon:"water-plus-outline"}}),e("h2",{staticClass:"is-size-5 ml-2"},[t._v("Suggested")]),e("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.suggestion,expression:"suggestion"},{name:"tippy",rawName:"v-tippy"}],staticClass:"ml-2",attrs:{icon:"information-outline",size:"is-small","data-tippy-content":"The <b>suggested publications</b> based on references to and from the selected publications, sorted by score."}})],1)]),t.suggestion?e("div",{staticClass:"level-right has-text-white"},[e("div",{staticClass:"level-item"},[e("span",[t._v(" "+t._s(t.suggestion.publications.length)+" "),t.unreadSuggestionsCount>0?e("b-tag",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{icon:"bell",size:"is-small","data-tippy-content":"The number of unread suggestions."}},[t._v(t._s(t.unreadSuggestionsCount))]):t._e(),t._v(" of "+t._s(t.suggestion.totalSuggestions.toLocaleString("en"))+" suggestions ")],1),e("b-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"level-item compact-button",attrs:{"icon-right":"playlist-plus","data-tippy-content":"Load more suggestions",disabled:t.suggestion.publications.length===t.suggestion.totalSuggestions},on:{click:function(e){return e.stopPropagation(),t.$emit("loadMore")}}})],1)]):t._e()]),e("PublicationListComponent",{attrs:{publications:t.suggestion?t.suggestion.publications:[],suggestion:!0},on:{add:t.addPublication,remove:t.removePublication,activate:t.activatePublication,showAbstract:t.showAbstract,exportSingleBibtex:t.exportSingleBibtex}})],1)},q=[],X={name:"SuggestedPublicationsComponent",components:{PublicationListComponent:E},props:{title:String,suggestion:Object},computed:{unreadSuggestionsCount:function(){return this.suggestion.publications.filter((function(t){return!t.isRead})).length}},methods:{addPublication:function(t){this.$emit("add",t)},removePublication:function(t){this.$emit("remove",t)},activatePublication:function(t){this.$emit("activate",t)},showAbstract:function(t){this.$emit("showAbstract",t)},exportSingleBibtex:function(t){this.$emit("exportSingleBibtex",t)}}},Y=X,V=(i("30c7"),Object(p["a"])(Y,J,q,!1,null,"0d7655ff",null)),G=V.exports,Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"network-of-references"},[e("div",{staticClass:"box has-background-grey"},[e("div",{staticClass:"level"},[e("div",{staticClass:"level-left has-text-white"},[e("div",{staticClass:"level-item"},[e("b-icon",{attrs:{icon:"chart-bubble"}}),e("h2",{staticClass:"is-size-5 ml-2"},[t._v("Citation network")]),e("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.selectedPublications.length,expression:"selectedPublications.length"},{name:"tippy",rawName:"v-tippy"}],staticClass:"ml-2",attrs:{icon:"information-outline",size:"is-small","data-tippy-content":"Showing publications as nodes (<b class='has-text-primary'>selected</b>; <b class='has-text-info'>suggested</b>) with citations as links.<br><br>You can click a publication for details as well as zoom and pan the diagram."}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedPublications.length,expression:"selectedPublications.length"}],staticClass:"level-right"},[e("b-field",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"level-item has-text-white mr-4 mb-0",attrs:{"data-tippy-content":"There are two display <span class='key'>m</span>odes:<br><br><b>Timeline:</b> The diagram places publications from left to right based on year, and vertically tries to group linked publications close to each other.<br><br><b>Clusters:</b> The diagram groups linked publications close to each other, irrespective of publication year."}},[e("label",{staticClass:"mr-2",class:{"has-text-grey-light":t.isClusters}},[t._v("Timeline")]),e("b-switch",{attrs:{type:"is-dark","passive-type":"is-dark"},model:{value:t.isClusters,callback:function(e){t.isClusters=e},expression:"isClusters"}}),e("label",{class:{"has-text-grey-light":!t.isClusters}},[t._v("Clusters")])],1),e("b-button",{directives:[{name:"tippy",rawName:"v-tippy"},{name:"show",rawName:"v-show",value:!t.isExpanded,expression:"!isExpanded"}],staticClass:"level-item compact-button is-hidden-touch",attrs:{"icon-right":"arrow-expand","data-tippy-content":"Expand diagram"},on:{click:function(e){return e.stopPropagation(),t.$emit("expand")}}}),e("b-button",{directives:[{name:"tippy",rawName:"v-tippy"},{name:"show",rawName:"v-show",value:t.isExpanded,expression:"isExpanded"}],staticClass:"level-item compact-button is-hidden-touch",attrs:{"icon-right":"arrow-collapse","data-tippy-content":"Collapse diagram"},on:{click:function(e){return e.stopPropagation(),t.$emit("collapse")}}})],1)]),e("div",{attrs:{id:"network-svg-container"}},[e("svg",{attrs:{id:"network-svg",width:"100%",height:"100%"}})])])])},tt=[],et=(i("9911"),i("4ec9"),i("898b")),it=i("6f9a"),nt=(i("52df"),20),at=1.5,ot=20,st={props:{selectedPublications:Array,suggestedPublications:Array,isExpanded:Boolean},data:function(){return{graph:{nodes:[],links:[]},simulation:null,svg:null,svgHeight:Number,svgWidth:Number,yearMin:Number,yearMax:Number,node:null,link:null,label:null,isClusters:!1}},watch:{selectedPublications:{deep:!0,handler:function(){this.plot()}},suggestedPublications:{deep:!0,handler:function(){this.plot()}},isClusters:{handler:function(){this.initForces(),this.plot(!0)}}},mounted:function(){var t=this,e=document.getElementById("network-svg-container");this.svgWidth=e.clientWidth,this.svgHeight=e.clientHeight,this.svg=et["f"]("#network-svg").call(et["g"]().on("zoom",(function(e,i){t.svg.attr("transform",e.transform)}))).append("g"),this.simulation=et["c"](),this.simulation.alphaDecay(.02),this.initForces(),this.label=this.svg.append("g").attr("class","labels").selectAll("text"),this.link=this.svg.append("g").attr("class","links").selectAll("path"),this.node=this.svg.append("g").attr("class","nodes").selectAll("rect")},methods:{initForces:function(){var t=this,e=this;this.simulation.force("link",et["a"]().id((function(t){return t.id})).distance(50).strength(e.isClusters?.15:.08)).force("charge",et["b"]().strength(-180)).force("x",et["d"]().x((function(e){return t.yearX(e.publication.year)})).strength(e.isClusters?0:10)).force("y",et["e"]().y(.5*(e.svgHeight-nt)).strength(e.isClusters?.1:.25)).on("tick",this.tick)},plot:function(t){var e=this;function i(t){return nt*(t.publication.isActive?at:1)}function n(t){var e=1;return t.publication.boostFactor>=8?e=2:t.publication.boostFactor>=4?e=1.6:t.publication.boostFactor>1&&(e=1.3),i(t)*e*.8}var a={};this.yearMin=3e3,this.yearMax=0;var o=[],s=0;this.selectedPublications.concat(this.suggestedPublications).forEach((function(t){t.year&&(e.yearMin=Math.min(e.yearMin,t.year),e.yearMax=Math.max(e.yearMax,t.year),a[t.doi]=s,o.push({id:t.doi,publication:t}),s++)}));var c=[];this.selectedPublications.forEach((function(t){t.doi in a&&(t.citationDois.forEach((function(e){e in a&&c.push({source:e,target:t.doi})})),t.referenceDois.forEach((function(e){e in a&&c.push({source:t.doi,target:e})})))}));var r=new Map(this.node.data().map((function(t){return[t.id,t]})));this.graph.nodes=o.map((function(t){return Object.assign(r.get(t.id)||{x:e.svgWidth/2,y:0},t)})),this.graph.links=c.map((function(t){return Object.assign({},t)})),this.node=this.node.data(this.graph.nodes,(function(t){return t.id})).join((function(t){var i=t.append("g").attr("class","node-container").attr("data-tippy-content",(function(t){return"".concat(t.publication.title?t.publication.title:"[unknown title]"," (").concat(t.publication.authorShort?t.publication.authorShort+", ":"").concat(t.publication.year?t.publication.year:"[unknown year]",")")}));return i.append("rect"),i.append("text"),i.append("circle"),i.on("click",e.activatePublication),Object(it["a"])(i.nodes(),{maxWidth:"min(400px,70vw)"}),i})),this.node.select("rect").attr("class",(function(t){return(t.publication.isSelected?"selected":"suggested")+(t.publication.isActive?" active":"")+(t.publication.isLinkedToActive?" linkedToActive":"")})).attr("width",(function(t){return i(t)})).attr("height",(function(t){return i(t)})).attr("x",(function(t){return-i(t)/2})).attr("y",(function(t){return-i(t)/2})).attr("stroke-width",(function(t){return t.publication.isActive?4:3})).attr("fill",(function(t){return t.publication.scoreColor})),this.node.select("text").attr("class",(function(t){return"".concat(t.publication.isRead||t.publication.isSelected?"":"unread")})).attr("y",1).attr("font-size","0.8em").text((function(t){return t.publication.score})),this.node.select("circle").attr("cx",(function(t){return i(t)/2-1})).attr("cy",(function(t){return-i(t)/2+1})).attr("r",(function(t){return t.publication.boostFactor>1?n(t)/6:0})).attr("stroke","black"),this.link=this.link.data(this.graph.links,(function(t){return[t.source,t.target]})).join("path");var l=T.a.range(this.yearMin-4,this.yearMax+1).filter((function(t){return t%5===0}));this.label=this.label.data(l,(function(t){return t})).join((function(t){var e=t.append("g");return e.append("text"),e.append("text"),e})),this.label.selectAll("text").attr("text-anchor","middle").attr("visibility",this.selectedPublications.length>0&&!this.isClusters?"visible":"hidden").text((function(t){return t})).attr("fill","grey"),this.selectedPublications.length>0&&this.label.attr("transform",(function(t){return"translate(".concat(e.yearX(t),",").concat(e.svgHeight-ot,")")})).select("text").attr("y",-this.svgHeight+2*ot),this.simulation.nodes(this.graph.nodes),this.simulation.force("link").links(this.graph.links),t&&this.simulation.alpha(.4),this.simulation.restart()},tick:function(){this.link.attr("d",(function(t){var e=t.target.x-t.source.x,i=t.target.y-t.source.y,n=Math.pow(e*e+i*i,.6);return"M"+t.target.x+","+t.target.y+"A"+n+","+n+" 0 0,1 "+t.source.x+","+t.source.y})).attr("class",(function(t){return(t.source.publication.isActive||t.target.publication.isActive?"active":"")+(t.source.publication.isSelected&&t.target.publication.isSelected?"":" external")})),this.node.attr("transform",(function(t){return"translate(".concat(t.x,", ").concat(t.y,")")}))},yearX:function(t){return(t-this.yearMin)/Math.sqrt(1+this.yearMax-this.yearMin)*this.svgWidth*.15},activatePublication:function(t,e){this.$emit("activate",e.publication.doi),t.stopPropagation()},toggleMode:function(){this.isClusters=!this.isClusters}}},ct=st,rt=(i("0b2c"),Object(p["a"])(ct,Z,tt,!1,null,null,null)),lt=rt.exports,ut=function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"button has-background-primary has-text-white",on:{click:function(e){return t.scrollTo("selected")}}},[e("b-icon",{attrs:{icon:"water-outline"}})],1),e("button",{staticClass:"button has-background-info has-text-white",on:{click:function(e){return t.scrollTo("suggested")}}},[e("b-icon",{attrs:{icon:"water-plus-outline"}})],1),e("button",{staticClass:"button has-background-grey has-text-white",on:{click:function(e){return t.scrollTo("network")}}},[e("b-icon",{attrs:{icon:"chart-bubble"}})],1)])},dt=[],pt={name:"QuickAccessBar",methods:{scrollTo:function(t){w(document.getElementById(t),55)}}},ht=pt,bt=(i("5944"),Object(p["a"])(ht,ut,dt,!1,null,"7e9c2158",null)),ft=bt.exports,vt=(i("841c"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("header",{staticClass:"card-header has-background-primary"},[e("p",{staticClass:"card-header-title has-text-white"},[e("b-icon",{attrs:{icon:"magnify"}}),t._v(" Search Publications ")],1)]),e("div",{staticClass:"card-content"},[e("div",{staticClass:"content"},[e("section",[e("form",{staticClass:"field has-addons",on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[e("p",{staticClass:"control is-expanded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],ref:"searchInput",staticClass:"input search-publication",attrs:{type:"text"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})]),e("p",{staticClass:"control"},[e("b-button",{staticClass:"button level-right has-background-primary-light",attrs:{type:"submit","icon-left":"magnify"},on:{click:function(e){return e.stopPropagation(),t.search.apply(null,arguments)}}})],1)]),e("ul",{staticClass:"publication-list"},[t._l(t.filteredSearchResults,(function(i){return e("li",{key:i.DOI,staticClass:"publication-component media"},[e("div",{staticClass:"media-content"},[e("b",[t._v(" "+t._s(i.title[0]+(i.subtitle&&i.title[0]!==i.subtitle[0]?" "+i.subtitle[0]:""))+" ")]),i.author?e("span",[t._v(" "+t._s(t.createShortReference(i)))]):t._e(),e("span",[t._v(" DOI: "),e("a",{attrs:{href:"https://doi.org/".concat(i.DOI)}},[t._v(t._s(i.DOI))])]),e("span",[e("a",{staticClass:"ml-2",attrs:{href:"https://scholar.google.de/scholar?hl=en&q=".concat(i.title," ").concat(i.author?i.author.map((function(t){return t.family})).join(" "):"")}},[e("b-icon",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{icon:"school",size:"is-small","data-tippy-content":"Google Scholar"}})],1)])]),e("div",{staticClass:"media-right"},[e("div",[e("b-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"is-primary is-small",attrs:{"icon-left":"plus-thick","data-tippy-content":"Add publication to list of selected publications."},on:{click:function(e){return e.stopPropagation(),t.$emit("add",i.DOI)}}})],1)])])})),e("b-loading",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}})],2)])])])])}),gt=[],mt=(i("caad"),i("2532"),function(){function t(e){Object(N["a"])(this,t),this.query=e}return Object(B["a"])(t,[{key:"execute",value:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.query.replace(/\W+/g,"+").toLowerCase(),console.log("Searching for publications with title or similar to '".concat(this.query,"'.")),i=[],t.next=5,I("https://api.crossref.org/works?query=".concat(e,"&mailto=fabian.beck@uni-bamberg.de&filter=has-references:true"),(function(t){t.message.items.filter((function(t){return t.title})).forEach((function(t){i.push(t)}))}));case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"computeTitleSimilarity",value:function(t,e){var i=["the","for","with","and"],n=0,a=0,o=" "+e.replace(/\W+/g," ").toLowerCase()+" ";return t.split("+").forEach((function(t){t.length>2&&-1===i.indexOf(t)&&(a++,o.indexOf(" "+t+" ")>=0&&n++)})),n/a}}]),t}()),yt={name:"SearchPanel",props:{initialSearchQuery:String,selectedPublicationsDois:Array},data:function(){return{searchQuery:"",searchResults:[],isLoading:!1}},mounted:function(){var t=this;this.searchQuery=this.initialSearchQuery,setTimeout((function(){t.$refs.searchInput.focus()}),300),this.searchQuery&&this.search()},computed:{filteredSearchResults:function(){var t=this;return this.searchResults.filter((function(e){return!t.selectedPublicationsDois.includes(e.DOI)}))}},methods:{search:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,e=new mt(this.searchQuery),t.next=4,e.execute();case 4:this.searchResults=t.sent,0===this.filteredSearchResults.length&&this.$emit("searchEmpty"),this.isLoading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createShortReference:function(t){var e=t.author.filter((function(t){return t.family})).map((function(t){return t.family})),i="";e.length>0&&(i=e[0],2===e.length?i+=" and "+e[1]:i+=" et al.");var n="";return t.published&&(n=t.published["date-parts"][0][0]),i&&n?"(".concat(i,", ").concat(n,")"):"(".concat(i+n,")")}}},wt=yt,Ct=(i("2a0b"),Object(p["a"])(wt,vt,gt,!1,null,"7ffd2624",null)),xt=Ct.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card",attrs:{id:"about"}},[t._m(0),e("div",{staticClass:"card-content"},[e("div",{staticClass:"content"},[e("section",[e("div",{staticClass:"level"},[e("div",{staticClass:"level-left"},[e("div",{staticClass:"level-item"},[e("span",{staticClass:"title",domProps:{innerHTML:t._s(this.$appNameHtml)}})]),e("div",{staticClass:"level-item"},[e("span",{staticClass:"subtitle"},[t._v(t._s(this.$appSubtitle))])])]),e("div",{staticClass:"level-right"},[e("span",{staticClass:"is-size-7 level-item"},[e("label",[t._v("Version: ")]),t._v(t._s(this.$version))])])]),t._m(1),e("p",[t._v(" The code is available on "),e("a",{attrs:{href:"https://github.com/fabian-beck/pure-suggest"}},[t._v("GitHub "),e("b-icon",{attrs:{icon:"github",size:"is-small"}})],1),t._v(" under "),e("a",{attrs:{href:"https://github.com/fabian-beck/pure-suggest/blob/master/LICENSE"}},[t._v("MIT License "),e("b-icon",{attrs:{icon:"license",size:"is-small"}})],1),t._v(". ")]),e("h2",[e("b-icon",{attrs:{icon:"file-document"}}),t._v(" Scientific Publication")],1),e("p",[t._v(" If you want to cite the tool, you can refer to the following publication: ")]),t._m(2),e("h2",[e("b-icon",{attrs:{icon:"database"}}),t._v(" Data Sources")],1),e("p",[t._v(" APIs by the following projects are used to retrieve the literature meta-data and citation information. ")]),t._m(3),e("h2",[e("b-icon",{attrs:{icon:"tools"}}),t._v(" Similar Tools")],1),t._m(4),t._m(5),e("h2",[e("b-icon",{attrs:{icon:"card-account-mail"}}),t._v(" Contact")],1),t._m(6),t._m(7),t._m(8)])])])])},kt=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"card-header has-background-primary"},[e("p",{staticClass:"card-header-title has-text-white"},[t._v("About")])])},function(){var t=this,e=t._self._c;return e("p",[e("em",[t._v("PURE suggest")]),t._v(" is a scientific literature search tool that, starting from some seed papers, suggests scientific publications through citations/references. ")])},function(){var t=this,e=t._self._c;return e("ul",[e("li",[t._v(" Beck, F. and Krause, C., 2022. Visually Explaining Publication Ranks in Citation-based Literature Search with PURE suggest. In EuroVis 2022 - Posters. DOI: "),e("a",{attrs:{href:"https://diglib.eg.org/handle/10.2312/evp20221110"}},[t._v("10.2312/evp.20221110")]),t._v(". ["),e("a",{attrs:{href:"https://diglib.eg.org/bitstream/handle/10.2312/evp20221110/019-021.pdf"}},[t._v("PDF")]),t._v("] ")])])},function(){var t=this,e=t._self._c;return e("ul",[e("li",[e("a",{attrs:{href:"https://opencitations.net/"}},[t._v("OpenCitations")])]),e("li",[e("a",{attrs:{href:"https://www.crossref.org/"}},[t._v("CrossRef")])])])},function(){var t=this,e=t._self._c;return e("p",[e("em",[t._v("PURE suggest")]),t._v(" is not the first of its kind, but other tools are available that also provide a visually supported literature search through citation links. Try them out and decide yourself which one you like best! ")])},function(){var t=this,e=t._self._c;return e("ul",[e("li",[e("a",{attrs:{href:"https://www.citationgecko.com/"}},[t._v("Citation Gecko")])]),e("li",[e("a",{attrs:{href:"https://www.connectedpapers.com"}},[t._v("Connected Papers")])]),e("li",[e("a",{attrs:{href:"https://www.researchrabbit.ai/"}},[t._v("Research Rabbit")])])])},function(){var t=this,e=t._self._c;return e("p",[e("em",[t._v("PURE suggest")]),t._v(" has been created by:")])},function(){var t=this,e=t._self._c;return e("p",[e("a",{attrs:{href:"https://github.com/fabian-beck"}},[t._v("Fabian Beck")]),t._v(" "),e("br"),t._v(" University of Bamberg "),e("br"),t._v(" 96047 Bamberg, Germany "),e("br"),e("a",{attrs:{href:"mailto:fabian.beck@uni-bamberg.de"}},[t._v("fabian.beck@uni-bamberg.de")])])},function(){var t=this,e=t._self._c;return e("p",[t._v(" Thanks a lot to all other contributors, especially "),e("a",{attrs:{href:"https://github.com/cedrickrause"}},[t._v("Cedric Krause")]),t._v(". ")])}],Pt=(i("89e4"),{}),St=Object(p["a"])(Pt,_t,kt,!1,null,"6bd7ac54",null),Ot=St.exports,At=function(){var t=this;t._self._c;return t._m(0)},jt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card",attrs:{id:"keyboardControls"}},[e("header",{staticClass:"card-header has-background-primary"},[e("p",{staticClass:"card-header-title has-text-white"},[t._v("Keyboard Controls")])]),e("div",{staticClass:"card-content"},[e("div",{staticClass:"content"},[e("section",[e("p",[t._v(" You can use the following keyboard shortcuts to control the application. ")]),e("h2",[t._v("General")]),e("ul",[e("li",[e("b",[t._v("a")]),t._v(' – Jump to "Add" input field')]),e("li",[e("b",[t._v("s")]),t._v(' – Open "Search" dialog')]),e("li",[e("b",[t._v("b")]),t._v(' – Jump to "Boost" input field')]),e("li",[e("b",[t._v("c")]),t._v(" – Clear session")]),e("li",[e("b",[t._v("Arrow left")]),t._v(' – Jump to first publication of "Selected" ')]),e("li",[e("b",[t._v("Arrow right")]),t._v(' – Jump to first publication of "Suggested" ')]),e("li",[e("b",[t._v("Arrow down")]),t._v(" – Move one publication down (if one is active) ")]),e("li",[e("b",[t._v("Arrow up")]),t._v(" – Move one publication up (if one is active) ")]),e("li",[e("b",[t._v("Escape")]),t._v(" – Escape input field or active publication ")]),e("li",[e("b",[t._v("m")]),t._v(" – Toggle mode of citation network visualization between "),e("em",[t._v("timeline")]),t._v(" and "),e("em",[t._v("clusters")])])]),e("h2",[t._v("Active Publication")]),e("p",[t._v("If a publication is marked as active:")]),e("ul",[e("li",[e("b",[t._v("+ (plus)")]),t._v(" – Add publication to selection")]),e("li",[e("b",[t._v("- (minus)")]),t._v(" – Exclude publication from selection/suggestion ")]),e("li",[e("b",[t._v("d")]),t._v(' – Open "DOI" link')]),e("li",[e("b",[t._v("o")]),t._v(' – Open "Open access" link')]),e("li",[e("b",[t._v("g")]),t._v(' – Open "Google Scholar" link')]),e("li",[e("b",[t._v("x")]),t._v(" – Export as BibTeX citation")])])])])])])}],Dt=(i("357e"),{}),Et=Object(p["a"])(Dt,At,jt,!1,null,"5a462f7a",null),Nt=Et.exports,Bt=(i("fb6a"),i("00b4"),i("466d"),i("5b81"),i("0481"),i("4069"),i("4e82"),function(){function t(e){Object(N["a"])(this,t),this.doi=e.toLowerCase(),this.doiUrl="https://doi.org/"+e,this.title="",this.titleHighlighted="",this.year=void 0,this.author=void 0,this.authorShort=void 0,this.authorOrcid=void 0,this.container=void 0,this.volume=void 0,this.issue=void 0,this.page=void 0,this.oaLink=void 0,this.abstract=void 0,this.citationDois=[],this.referenceDois=[],this.citationCount=0,this.referenceCount=0,this.boostMatches=0,this.boostFactor=1,this.score=0,this.scoreColor="#FFF",this.isSurvey=!1,this.citationsPerYear=0,this.isHighlyCited=!1,this.isNew=!1,this.isActive=!1,this.isLinkedToActive=!1,this.isSelected=!1,this.isRead=!1}return Object(B["a"])(t,[{key:"fetchData",value:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e=this;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.title){t.next=5;break}return t.next=3,I("https://opencitations.net/index/coci/api/v1/metadata/".concat(this.doi),(function(t){if(t&&0!==t.length){var i=t[0];if(e.title=i.title,e.title="",i.title.split(" ").forEach((function(t){var i=Tt[t.toLowerCase()];e.title+=(i||t)+" "})),e.title=e.title.charAt(0).toUpperCase()+e.title.slice(1),e.title=e.title.trim(),i.author){var n=i.author.split("; ");1===n.length?e.authorShort=n[0].split(", ")[0]:2===n.length?e.authorShort="".concat(n[0].split(", ")[0]," and ").concat(n[1].split(", ")[0]):n.length>2&&(e.authorShort="".concat(n[0].split(", ")[0]," et al.")),e.author=i.author.replace(/(,\s+)(\d{4}-\d{4}-\d{4}-\d{3}[0-9X]{1})/g,""),e.authorOrcid=i.author.replace(/(,\s+)(\d{4}-\d{4}-\d{4}-\d{3}[0-9X]{1})/g," <a href='https://orcid.org/$2'><img alt='ORCID logo' src='https://info.orcid.org/wp-content/uploads/2019/11/orcid_16x16.png' width='14' height='14' /></a>")}if(e.container="",i.source_title.split(" ").forEach((function(t){var i="";i=/\(.+\)/.test(t)?t.toUpperCase():/\d+(st|nd|rd|th)/i.test(t)?t.toLowerCase():/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})(\.?)$/i.test(t)?t.toUpperCase():Tt[t.toLowerCase()],e.container+=(i||t)+" "})),e.container=T.a.trim(e.container,". "),e.container=e.container.charAt(0).toUpperCase()+e.container.slice(1),e.year=i.year,!e.year){var a=e.doi.match(/\.((19|20)\d\d)\./);a&&(e.year=a[1])}e.volume=i.volume,e.issue=i.issue,e.page=i.page,e.oaLink=i.oa_link,e.gsUrl="https://scholar.google.de/scholar?hl=en&q=".concat(e.title," ").concat(e.author?e.author:""),i.reference.split("; ").forEach((function(t){t&&e.referenceDois.push(t.toLowerCase())})),i.citation.split("; ").forEach((function(t){t&&e.citationDois.push(t.toLowerCase())})),e.citationsPerYear=e.citationDois.length/Math.max(1,Lt-e.year),e.referenceDois.length>100?e.isSurvey="more than 100 references (".concat(e.referenceDois.length,")"):e.referenceDois.length>=50&&/.*(survey|state|review|advances|future).*/i.test(e.title)&&(e.isSurvey="more than 50 references (".concat(e.referenceDois.length,') and "').concat(/(survey|state|review|advances|future)/i.exec(e.title)[0],'" in the title')),e.isHighlyCited=e.citationsPerYear>10&&"more than 10 citations per year (".concat(e.citationsPerYear.toFixed(1),")"),e.isNew=Lt-e.year<2&&"published within the last two calendar years"}else console.error('Unable to process metadata for DOI "'.concat(e.doi,'" because of empty message.'))}));case 3:return t.next=5,I("https://api.crossref.org/v1/works/".concat(this.doi,"?mailto=fabian.beck@uni-bamberg.de"),(function(t){t.message.abstract&&(e.abstract=t.message.abstract.replaceAll(/<jats:/gi,"<").replaceAll(/<\/jats:/gi,"</").replaceAll(/<.*?>abstract<.*?>/gi,""));var i=t.message.subtitle;if(i.length&&e.title.toLowerCase().indexOf(i[0].toLowerCase())){var n=e.title.replaceAll(/<[^>]*>/g,"");e.title="".concat(e.title).concat(n.match(/^.*\W$/)?"":":","  ").concat(i[0])}}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateScore",value:function(t){var e=this;this.boostMatches=0,this.boostFactor=1;var i=[this.title];t.forEach((function(t){if(t){for(var n=0;n<i.length;n++){var a=i[n];if(0!=a.indexOf("<")){var o=a.toLowerCase().indexOf(t);if(o>=0){e.boostMatches+=1,e.boostFactor=2*e.boostFactor,i[n]=[a.substring(0,o),"<u style='text-decoration-color: hsl(48, 100%, 67%); text-decoration-thickness: 0.25rem;'>"+a.substring(o,o+t.length)+"</u>",a.substring(o+t.length)];break}}}i=i.flat()}})),this.titleHighlighted=i.join(""),this.score=(this.citationCount+this.referenceCount)*this.boostFactor;var n=100;this.score>=20?n=50:this.score>=10?n=70:this.score>=5?n=80:this.score>=3?n=90:this.score>=2&&(n=95),this.scoreColor="hsl(0, 0%, ".concat(n,"%)")}},{key:"toBibtex",value:function(){var t="misc",e="";if(this.title&&(e+="\n    title = {".concat(this.title,"},")),this.author&&(e+="\n    author = {".concat(this.author.replaceAll(";"," and"),"},")),this.year&&(e+="\n    year = {".concat(this.year,"},")),this.volume)t="article",e+="\n    journal = {".concat(this.container,"},\n    volume = {").concat(this.volume,"},"),this.issue&&(e+="\n    number = {".concat(this.issue,"},"));else if(this.container){var i=this.container.toLowerCase();t=i.indexOf("proceedings")>=0||i.indexOf("conference")>=0||i.indexOf("symposium")>=0||i.indexOf("workshop")>=0?"inproceedings":"incollection",e+="\n    booktitle = {".concat(this.container,"},")}return this.page&&(e+="\n    pages = {".concat(this.page,"},")),"@".concat(t,"{").concat(this.doi,",").concat(e,"\n    doi = {").concat(this.doi,"}\n}")}}],[{key:"computeSuggestions",value:function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(i,n,a,o,r){var l,u,d,p;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=function(e,a,o,s){if(!n.has(e))if(i[e])i[e][a]++;else{if(!u[e]){var c=new t(e);u[e]=c}u[e][o].push(s),u[e][a]++}},console.log("Starting to compute new suggestions based on ".concat(Object.keys(i).length," selected (and ").concat(n.size," excluded).")),u={},Object.values(i).forEach((function(t){t.citationCount=0,t.referenceCount=0})),Object.values(i).forEach((function(t){t.citationDois.forEach((function(e){l(e,"citationCount","referenceDois",t.doi)})),t.referenceDois.forEach((function(e){l(e,"referenceCount","citationDois",t.doi)}))})),Object.values(i).forEach((function(t){return t.updateScore(a)})),d=Object.values(u),d=C(d,0),console.log("Identified ".concat(d.length," publications as suggestions.")),d.sort((function(t,e){return e.citationCount+e.referenceCount-(t.citationCount+t.referenceCount)})),d=d.slice(0,r),console.log("Filtered suggestions to ".concat(d.length," top candidates, loading metadata for these.")),p=0,o("".concat(p,"/").concat(d.length," suggestions loaded"),"is-info"),e.next=16,Promise.all(d.map(function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(e){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:p++,o("".concat(p,"/").concat(d.length," suggestions loaded"),"is-info");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 16:return d.forEach((function(t){return t.updateScore(a)})),this.sortPublications(d),console.log("Completed computing and loading of new suggestions."),e.abrupt("return",{publications:Object.values(d),totalSuggestions:Object.values(u).length});case 20:case"end":return e.stop()}}),e,this)})));function i(t,i,n,a,o){return e.apply(this,arguments)}return i}()},{key:"sortPublications",value:function(t){t.sort((function(t,e){return e.score-1/(e.citationsPerYear+1)-(t.score-1/(t.citationsPerYear+1))}))}}]),t}()),Lt=(new Date).getFullYear(),Tt={a:"a",an:"an",acm:"ACM",and:"and",by:"by",chi:"CHI",during:"during",for:"for",from:"from",ieee:"IEEE",in:"in",not:"not",of:"of",or:"or",on:"on",the:"the",their:"their",through:"through",to:"to",with:"with",within:"within"},$t={name:"App",components:{HeaderPanel:b,SelectedPublicationsComponent:W,SuggestedPublicationsComponent:G,NetworkVisComponent:lt,QuickAccessBar:ft,SearchPanel:xt,AboutPage:Ot,KeyboardControlsPage:Nt},data:function(){return{selectedPublications:[],suggestedPublications:[],suggestion:void 0,maxSuggestions:50,boostKeywords:[],searchQuery:"",excludedPublicationsDois:new Set,readPublicationsDois:new Set,activePublication:void 0,isSearchPanelShown:!1,isAboutPageShown:!1,isKeyboardControlsShown:!1,isNetworkExpanded:!1,isLoading:!1,loadingComponent:void 0,isOverlay:!1}},computed:{isMobile:function(){return window.innerWidth<=1023},selectedPublicationsDois:function(){return this.selectedPublications.map((function(t){return t.doi}))}},methods:{startSearchingSelected:function(){this.startLoading(),this.updateLoadingToast("Searching for publication with matching title","is-primary")},addPublicationsToSelection:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(e){var i,n,a=this;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Adding to selection publications with DOIs: ".concat(e,".")),document.activeElement.blur(),"string"===typeof e&&(e=[e]),i=0,n="",e.forEach((function(t){t=t.toLowerCase(),a.excludedPublicationsDois.has(t)&&a.excludedPublicationsDois.delete(t),Mt[t]||(Mt[t]=new Bt(t),n=t,i++)})),!(i>0)){t.next=13;break}return t.next=9,this.updateSuggestions();case 9:1==i&&this.activatePublicationComponentByDoi(n),this.$buefy.toast.open({message:"Added ".concat(1===i?"a publication":i+" publications"," to selected")}),t.next=15;break;case 13:this.$buefy.toast.open({message:"Publication".concat(e.length>1?"s":""," already in selected")}),this.endLoading();case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),removePublication:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(e){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.excludedPublicationsDois.add(e),delete Mt[e],t.next=4,this.updateSuggestions();case 4:this.$buefy.toast.open({message:"Excluded a publication"});case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),updateSuggestions:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e,i,n=this,a=arguments;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:50,this.maxSuggestions=e,this.startLoading(),i=0,this.updateLoadingToast("".concat(i,"/").concat(Object.keys(Mt).length," selected publications loaded"),"is-primary"),this.clearActivePublication("updating suggestions"),t.next=8,Promise.all(Object.values(Mt).map(function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(e){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.isSelected=!0,i++,n.updateLoadingToast("".concat(i,"/").concat(Object.keys(Mt).length," selected publications loaded"),"is-primary");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:return t.next=10,Bt.computeSuggestions(Mt,this.excludedPublicationsDois,this.boostKeywords,this.updateLoadingToast,this.maxSuggestions);case 10:this.suggestion=t.sent,this.suggestion.publications.forEach((function(t){t.isRead=n.readPublicationsDois.has(t.doi)})),this.selectedPublications=Object.values(Mt),Bt.sortPublications(this.selectedPublications),this.$refs.network.plot(!0),this.endLoading();case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadMoreSuggestions:function(){this.updateSuggestions(this.maxSuggestions+50)},updateBoost:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(e){var i,n=arguments;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=n.length>1&&void 0!==n[1]&&n[1],this.boostKeywords=e.toLowerCase().split(/,\s*/),i){t.next=5;break}return t.next=5,this.updateSuggestions();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setBoostKeywords:function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(e){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.selected.setBoost(e),this.updateBoost(e,!0);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setActivePublication:function(t){var e=this;this.clearActivePublication("setting active publication"),this.selectedPublications.forEach((function(i){i.isActive=i.doi===t,i.isActive&&(e.activePublication=i,e.selectedPublications.forEach((function(t){t.isLinkedToActive=i.citationDois.indexOf(t.doi)>=0||i.referenceDois.indexOf(t.doi)>=0})),e.suggestion.publications.forEach((function(t){t.isLinkedToActive=i.citationDois.indexOf(t.doi)>=0||i.referenceDois.indexOf(t.doi)>=0})))})),this.suggestion.publications.forEach((function(i){i.isActive=i.doi===t,i.isActive&&(i.isRead=!0,e.readPublicationsDois.add(t),e.activePublication=i,e.selectedPublications.forEach((function(t){t.isLinkedToActive=i.citationDois.indexOf(t.doi)>=0||i.referenceDois.indexOf(t.doi)>=0})))})),console.log("Highlighted as active publication with DOI ".concat(t,"."))},clearActivePublication:function(t){this.activePublication=void 0,this.selectedPublications.concat(this.suggestion?this.suggestion.publications:[]).forEach((function(t){t.isActive=!1,t.isLinkedToActive=!1})),console.log('Cleared any highlighted active publication, triggered by "'.concat(t,'".'))},activatePublicationComponent:function(t){t&&t.focus()},activatePublicationComponentByDoi:function(t){var e;console.log(Mt[t]),t!==(null===(e=this.activePublication)||void 0===e?void 0:e.doi)&&(this.activatePublicationComponent(document.getElementById(t)),this.setActivePublication(t))},startLoading:function(){this.isLoading||(this.loadingComponent=this.$buefy.loading.open({container:null}),this.isLoading=!0)},endLoading:function(){this.isLoading=!1,this.loadingToast&&(this.loadingToast.close(),this.loadingToast=null),this.loadingComponent&&(this.loadingComponent.close(),this.loadingComponent=null)},updateLoadingToast:function(t,e){this.loadingToast||(this.loadingToast=this.$buefy.toast.open({indefinite:!0})),this.loadingToast.message=t,this.loadingToast.type=e},openSearch:function(t,e){this.searchQuery=t,this.isSearchPanelShown=!0,e&&this.$buefy.toast.open({duration:5e3,message:e,type:"is-primary"})},notifySearchEmpty:function(){this.$buefy.toast.open({duration:5e3,message:"No matching publications found",type:"is-danger"})},showAbstract:function(t){var e=this,i=function(){e.isOverlay=!1,e.activatePublicationComponent(document.getElementById(t.doi))};this.isOverlay=!0,this.$buefy.dialog.alert({message:"<div><b>".concat(t.title,"</b></div><div><i>").concat(t.abstract,"</i></div>"),type:"is-dark",hasIcon:!0,icon:"text",confirmText:"Close",canCancel:["escape","outside"],onConfirm:i,onCancel:i})},exportSession:function(){var t={selected:Object.keys(Mt),excluded:Array.from(this.excludedPublicationsDois),boost:this.boostKeywords.join(", ")};y("session.json",JSON.stringify(t))},importSession:function(t){var e=this,i=new FileReader;i.onload=function(){try{var t=i.result,n=JSON.parse(t);e.loadSession(n)}catch(a){e.showErrorMessage("Cannot read JSON from file.")}},i.readAsText(t)},exportAllBibtex:function(){this.exportBibtex(this.selectedPublications)},exportSingleBibtex:function(t){this.exportBibtex([t])},exportBibtex:function(t){var e="";t.forEach((function(t){return e+=t.toBibtex()+"\n\n"})),y("publications.bib",e)},clearSession:function(){var t=this;this.isOverlay=!0,this.$buefy.dialog.confirm({message:"You are going to clear all selected articles and jump back to the initial state.",onConfirm:function(){Mt={},t.selectedPublications=[],t.excludedPublicationsDois=new Set,t.readPublicationsDois=new Set,t.setBoostKeywords(""),t.updateSuggestions(),t.isOverlay=!1},onCancel:function(){t.isOverlay=!1}})},clearCache:function(){R(),this.clearSession()},loadSession:function(t){console.log("Loading session ".concat(JSON.stringify(t))),t&&t.selected?(t.boost&&this.setBoostKeywords(t.boost),t.excluded&&(this.excludedPublicationsDois=new Set(t.excluded)),this.addPublicationsToSelection(t.selected)):this.showErrorMessage("Cannot read session state from JSON.")},loadExample:function(){var t={selected:["10.1109/tvcg.2015.2467757","10.1109/tvcg.2015.2467621","10.1002/asi.24171"],boost:"cit, vis"};this.loadSession(t)},showErrorMessage:function(t){this.$buefy.toast.open({duration:5e3,message:t,type:"is-danger"}),console.error(t)}},mounted:function(){this._keyListener=function(t){if(!(t.ctrlKey||t.shiftKey||t.metaKey||t.repeat&&"ArrowDown"!==t.key&&"ArrowUp"!==t.key))if(this.isLoading||this.isOverlay||this.isSearchPanelShown&"INPUT"!=document.activeElement.nodeName||this.isAboutPageShown||this.isKeyboardControlsShown)t.preventDefault();else if("INPUT"===document.activeElement.nodeName){if("Escape"!==t.key)return;document.activeElement.blur()}else if("c"===t.key)t.preventDefault(),this.clearSession();else if("Escape"===t.key)t.preventDefault(),document.activeElement.blur(),this.clearActivePublication("escape key");else if("a"===t.key)t.preventDefault(),this.clearActivePublication("setting focus on text field"),document.getElementsByClassName("input add-publication")[0].focus();else if("s"===t.key)t.preventDefault(),this.isSearchPanelShown=!0;else if("b"===t.key)t.preventDefault(),this.clearActivePublication("setting focus on text field"),document.getElementsByClassName("input boost")[0].focus();else if("m"===t.key)t.preventDefault(),this.$refs.network.toggleMode();else if("ArrowLeft"===t.key)t.preventDefault(),this.activatePublicationComponent(document.getElementById("selected").getElementsByClassName("publication-component")[0]);else if("ArrowRight"===t.key)t.preventDefault(),this.activatePublicationComponent(document.getElementById("suggested").getElementsByClassName("publication-component")[0]);else if(this.activePublication)if("ArrowDown"===t.key||"ArrowUp"===t.key){t.preventDefault();var e=document.getElementsByClassName("publication-component active")[0];this.activatePublicationComponent("ArrowDown"===t.key?e.nextSibling:e.previousSibling)}else"+"===t.key?(t.preventDefault(),this.addPublicationsToSelection(this.activePublication.doi)):"-"===t.key?(t.preventDefault(),this.removePublication(this.activePublication.doi)):"d"===t.key?(t.preventDefault(),window.open(this.activePublication.doiUrl)):"t"===t.key&&this.activePublication.abstract?(t.preventDefault(),this.showAbstract(this.activePublication)):"o"===t.key&&this.activePublication.oaLink?(t.preventDefault(),window.open(this.activePublication.oaLink)):"g"===t.key?(t.preventDefault(),window.open(this.activePublication.gsUrl)):"x"===t.key&&(t.preventDefault(),this.exportSingleBibtex(this.activePublication))},document.addEventListener("keydown",this._keyListener.bind(this))},beforeDestroy:function(){document.removeEventListener("keydown",this._keyListener)}};window.onbeforeunload=function(){return""};var Mt={},It=$t,Ft=(i("b97a"),Object(p["a"])(It,a,o,!1,null,null,null)),Rt=Ft.exports,zt=i("9224"),Kt=(i("5363"),i("289d")),Ht=i("6018");n["a"].use(Kt["a"],{defaultIconPack:"mdi"}),n["a"].use(Ht["b"],{maxWidth:"min(400px,70vw)"}),n["a"].component("tippy",Ht["a"]),n["a"].config.productionTip=!1,n["a"].prototype.$appName="PURE suggest",n["a"].prototype.$appNameHtml='<span class="has-text-primary">PURE&nbsp;</span><span class="has-text-info">suggest</span>',n["a"].prototype.$appSubtitle="Citation-based literature search",n["a"].prototype.$version=zt["a"],new n["a"]({render:function(t){return t(Rt)}}).$mount("#app")},5944:function(t,e,i){"use strict";i("3ed4")},"686a":function(t,e,i){},"6b70":function(t,e,i){},"89e4":function(t,e,i){"use strict";i("1241")},9224:function(t){t.exports=JSON.parse('{"a":"0.3.0"}')},ac6b:function(t,e,i){"use strict";i("2506")},b97a:function(t,e,i){"use strict";i("32fe")},bed9:function(t,e,i){"use strict";i("686a")},c33d:function(t,e,i){},d21c:function(t,e,i){},dc6b:function(t,e,i){"use strict";i("c33d")},e864:function(t,e,i){}});
//# sourceMappingURL=app.4c2d22da.js.map